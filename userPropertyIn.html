<!DOCTYPE html>
<html lang="en">
<head>
<title>充值</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="baidu-site-verification" content="z8EeuYl0nS" />
<meta name="keywords" content="华路卓">
<meta name="description" content="华路卓">
<meta name="divport" content="width=device-width, initial-scale=1">
<link href="css/basic.css" rel="stylesheet"/>
<script src="js/rem.js"></script>
<script type="text/javascript"  src="js/jquery-2.1.4.min.js"></script>
<script src="js/browser.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="js/base.js" type="application/javascript"></script>
</head>
<body  style="background: #fff;">
<style>
.w750{
    color:#666;
    width:100%;
    min-height:100%;
    background: #f2f2f2;
}
.sum_sort{
  height:.82rem;
  align-items:center;
  width:100%;
  display:flex;
  border-bottom:solid 1px #e0e0e0;
  background: #fff;
}
.sort_in{
  height:.46rem;
  width:100%;
}
.sort_item{
  width:50%;
  text-align:center;
}
.sum_cont {
  height:.80rem;
  line-height:.80rem;
  background: #fff;
}
.p40{
  background: #fff;
}
a{color:#fff;}
</style>
<div id="app">
  <div class="w750">
    <div class="sum flex">
    <div class="sum_in">
      <div style="width:100%;text-align:center;">
        <div class="font38">总充值</div>
        <div style="font-size:.42rem;color:#ed7101;margin-top:.40rem;">{{computeData.info?computeData.info.FlowLog.countsum:''}}元</div>
      </div>
    </div>
  </div>
  <div style="height:2.40rem;background:#eee;align-items:center;width:100%;display:flex;">
    <a class="sumIn font40" href="userPropertyInNow.html">我要充值</a>
  </div>
  <div class="p40">
    <div class="sum_txt">
      <div class="sumTxt">充值记录</div>
    </div>
    <div class="sum_sort">
      <div class="sort_in flexRowBetween font36">
          <div class="sort_item color" style="border-right:solid 1px #e0e0e0;">
              金额
          </div>
          <div class="sort_item color">
              时间
          </div>
      </div>
    </div>
    <div class="sum_cont flexRowBetween font34" v-for="item in mainData">
     <div class="sort_item">
        {{item.count}}元
      </div>
      <div class="sort_item">
        {{item.create_time}}
      </div>
    </div>
  </div>
  </div>
</div>
<script type="text/javascript">
            
    var app = new Vue({
        el: '#app',
        data: function() {
            return {
                
                mainData:[],
                computeData:[],
                
                paginate: {
                    
                    count: 0,
                    currentPage: 1,
                    pagesize: 6,
                    is_page: true,
                },

                searchItem:{
                    
                },
                pageArray:[],
                allPages:0,
                linkPage:'',

            }

        },
        
        created: function () {

            this.getMainData();
            this.getComputeData()
        },

        methods:{

        getMainData(){
          const self = this;
          const postData = {};
          postData.paginate = self.paginate;
          postData.token = window.base.getUserToken();
          postData.searchItem = {
            type:'2',
            user_type:0,
            count:['>',0]
          };
          postData.order = {
            create_time:'desc',
          };
          const callback = (res)=>{
            if(res.info.data.length>0){
              self.mainData.push.apply(self.mainData,res.info.data);
            }else{
              alert('没有更多了','fail')
            };
          };
          window.base.flowLogGet(postData,callback);
        },

        intoDetail(e) {
          var self = this;
          var art_id = window.base.getDataSet(e).id;
          window.location.href = "./indexDetail.html?id=" + art_id;
        }, 

        getComputeData(){
          const self = this;
          const postData = {};
          postData.data = {
            FlowLog:{
              compute:{
                count:'sum',
              },
              
              searchItem:{
                user_no:'UA16809144600791',
                type:2,
                count:['>',0]
              }
            }
          };
          const callback = (res)=>{
            
              self.computeData = res;
          
            console.log(self.computeData)
          };
          window.base.flowLogCompute(postData,callback);
        },


           
        }
    });            
</script>
</body>
</html>